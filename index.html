<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="A lightweight and simple javascript plugin for responsive image lazy loading. The micro plugin supports auto and manual lazy loading of images.">

    <title>Image lazy loading, javascript plugin | justlazy.js</title>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/justlazy.css" media="screen">
</head>
<body>

<header>
    <div class="container">
        <div class="headline">justlazy.js</div>
        <h1>micro javascript image lazy loading library</h1>
        <div id="downloads">
            <a href="https://github.com/fhopeman/justlazy/zipball/master" class="btn" title="download zip archive">get .zip</a>
            <a href="https://github.com/fhopeman/justlazy/tarball/master" class="btn" title="download tar.gz archive">get .tar.gz</a>
            <a href="https://github.com/fhopeman/justlazy" class="btn btn-github" title="plugin code">
                <span class="icon"></span>
                view code
            </a>
            <a href="https://github.com/fhopeman/justlazy" class="btn btn-github" title="star plugin">
                <span class="icon"></span>
                star me
            </a>
        </div>
        <a href="https://travis-ci.org/fhopeman/justlazy" title="travis-ci build information">
            <img src="https://travis-ci.org/fhopeman/justlazy.svg?branch=master" title="build status" alt="build status">
        </a>
        <a href="https://twitter.com/share" class="twitter-share-button"
           title="share on twitter"
           data-url="http://fhopeman.github.io/justlazy"
           data-text="justlazy.js - micro javascript image lazy loading plugin without jQuery"
           data-via="fabianhoffmann7"
           data-count="none">
            Tweet
        </a>
    </div>
</header>

<div class="container">
    <div id="main-content">
        <h2>Why yet another lazy loading plugin?</h2>
        <p>
            Most of the existing javascript lazy
            loading plugins use extensive dependencies
            (e.g. <a href="https://jquery.com/" title="jQuery homepage" target="_blank">jQuery</a>)
            or support just the <code>img</code>-tag without responsive parts. This plugin is supposed to
            be a lightweight alternative. The main goals are:
            <ul>
                <li>100% performance with plain javascript (no jQuery)</li>
                <li>100% valid HTML (no empty src attribute)</li>
                <li>Simplicity and lightness (just lazy loading of images, no special cases)</li>
                <li>Heavily tested on various devices, browsers and OS versions</li>
            </ul>
            <img src="https://saucelabs.com/browser-matrix/fhopeman.svg" title="test status" alt="test status">
        </p>

        <section>
            <h2>Usage</h2>
            <p>
                Too lazy for the details? <a title="demo" href="#demo">Jump to the demo!</a>
            </p>
            <p>
                To lazy load an image, first of all a placeholder
                of your choice (e.g. <code>span</code>,
                <code>div</code>, ..) has to be defined. This placeholder itself is an html element
                which contains several data-attributes to provide the image information.
            </p>
            <p>
                The library loads the images with javascript in the background and then replaces the
                whole placeholder with the image. You don't have to care about removing the styling
                or other relics of the placeholder.
            </p>
            <p>
                <b>Steps to do</b>
                <ol>
                    <li><span>Define placeholder</span></li>
                    <li><span>Register event</span></li>
                </ol>
            </p>

            <h3>1. Define placeholder</h3>
            <p>
                The placeholder has to be defined in your html. The <code>data-src</code> and
                <code>data-alt</code> attributes are mandatory, the rest of them are optional. You can define
                as many placeholders as you need.
            </p>
            <table>
                <thead>
                <tr>
                    <th>Attribute</th>
                    <th>Description</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td><code>data-src</code> (mandatory)</td>
                    <td>Source of the image</td>
                </tr>
                <tr>
                    <td><code>data-alt</code> (mandatory)</td>
                    <td>Alt text of the image, <code>data-alt=""</code> is allowed, but not recommended!</td>
                </tr>
                <tr>
                    <td><code>data-title</code></td>
                    <td>Title of the image</td>
                </tr>
                <tr>
                    <td><code>data-error-handler</code></td>
                    <td>Error handler of the image</td>
                </tr>
                <tr>
                    <td><code>data-srcset</code></td>
                    <td>Responsive image source-set attribute</td>
                </tr>
                </tbody>
            </table>
            <p>
                Example:
            </p>
            <pre><!--
             --><code><!--
<!--             -->&lt;span data-src="default/image" data-alt="some alt text"
<!--             -->      data-srcset="small/image 600w, big/image 1000w"
<!--             -->      data-title="some title" data-error-handler="some handler"
<!--             -->      class="justlazy-spinner"&gt;
<!--             -->&lt;/span&gt;<!--
             --></code><!--
         --></pre>
            <p>
                As you can see, the default lazy loading spinner is provided by the
                <code>justlazy-spinner</code> class.
            </p>

            <h3>2. Register event</h3>
            <p>
                There are three possiblities to trigger the lazy loading of the image(s).
            </p>
            <p>
                The most comfortable one registers an event listener for all placeholders
                with a specific
                css class (e.g. <code>justlazy-spinner</code>). The images will be loaded
                automatically if they become visible. The parameters
                are the <a href="#css-class" title="css-class parameter">css-class</a> as string and optional
                <a href="#options" title="options parameter description">options</a>.
                (<a href="#example-by-class" title="example by class">Demo 1</a>)
            </p>
            <pre><!--
             --><code><!--
                 -->Justlazy.registerLazyLoadByClass(css-class[, options]);<!--
             --></code><!--
         --></pre>

            <p>
                If you need more flexibility, the next function accepts as first
                parameter the html object of the placeholder. So you can decide how to
                extract the placeholder objects out of the html.
                The parameters are the
                <a href="#placeholder" title="placeholder parameter description">placeholder</a>
                as object and
                <a href="#options" title="options parameter description">options</a> if you need
                them.
                (<a href="#example-by-placeholder" title="example by placeholder">Demo 2</a>)
            </p>
            <pre><!--
             --><code><!--
                 -->Justlazy.registerLazyLoad(placeholder[, options]);<!--
             --></code><!--
         --></pre>

            <p>
                The most flexible way is to use the last function, which has to be called manually
                to load the image. The advantage is, that you can use custom events (e.g. a
                sliding event of a gallery) to trigger the lazy loading.
                The parameters are <a href="#placeholder" title="placeholder parameter description">placeholder</a>
                as object and <a href="#options" title="options parameter description">options</a>.
                (<a href="#example-by-custom-event" title="example by custom event">Demo 3/4</a>)
            </p>
            <pre><!--
             --><code><!--
                 -->Justlazy.lazyLoad(placeholder[, options]);<!--
             --></code><!--
         --></pre>

            <h4>Parameters</h4>
            <h5 id="css-class"><code>css-class</code></h5>
            <p>
                The <code>css-class</code> is a string which has to be provided
                without the class selector dot as prefix.
            </p>
            <p>
                Example:
            </p>
            <pre><!--
             --><code><!--
                 -->Justlazy.registerLazyLoadByClass("load-if-visible-placeholder");<!--
             --></code><!--
         --></pre>

            <h5 id="placeholder"><code>placeholder</code></h5>
            The <code>placeholder</code> has to be provided as plain javascript object.
            <p>
                Example:
            </p>
            <pre><!--
             --><code><!--
                 -->Justlazy.registerLazyLoad(document.getElementById("placeholder-1"));<!--
             --></code><!--
         --></pre>

            <h5 id="options"><code>options</code></h5>
            <p>
                The <code>options</code> are provided as object with following
                properties. All of them are optional and you can provide as many
                as you need.
            </p>
            <table>
                <thead>
                    <tr>
                        <th>Property</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            <code>onreplaceCallback</code>
                        </td>
                        <td>
                            The function will be invoked immediately before the placeholder
                            is replaced with the image tag. E.g. this hook can be used to add
                            classes to the image.
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <code>onloadCallback</code>
                        </td>
                        <td>
                            The function will be invoked if the placeholder is properly replaced and
                            the image is <b>entirely</b> loaded.
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <code>onerrorCallback</code>
                        </td>
                        <td>
                            The function will be invoked if the placeholder could not be replaced.
                            This occurs if mandatory attributes (e.g. <code>data-src</code>)
                            aren't available.
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <code>threshold</code>
                        </td>
                        <td>
                            The image is loaded the defined pixels before it
                            appears on the screen. E.g. 200px before it becomes visible.
                        </td>
                    </tr>
                </tbody>
            </table>
            <p>
                Example:
            </p>
            <pre><!--
             --><code><!--
                 -->Justlazy.registerLazyLoadByClass("load-if-visible-placeholder", {
<!--             -->    onreplaceCallback: function() {
<!--             -->        // do something immediately before replacement
<!--             -->    },
<!--             -->    onloadCallback: function() {
<!--             -->        // do something after image loading
<!--             -->    },
<!--             -->    onerrorCallback: function() {
<!--             -->        // do something if an error occurs
<!--             -->    },
<!--             -->    threshold: 200
<!--             -->});<!--
             --></code><!--
         --></pre>
        </section>

        <section>
            <h2 id="demo">Demo</h2>
            <!-- example 1 -->
            <div class="example">
                <h3 id="example-by-class">#1 lazy loading if images are visible</h3>
                <p>
                    This example loads the images automatically if they become visible in the viewport
                    and uses the event registration by class function.
                </p>
                <pre><!--
                 --><code><!--
                -->Justlazy.registerLazyLoadByClass("load-if-visible-placeholder", {
<!--             -->    onreplaceCallback: hideIncompleteLoadedImage,
<!--             -->    onloadCallback: showImageAndRemoveSpinner
<!--             -->});<!--
                 --></code><!--
             --></pre>
                <div class="justlazy-spinner">
                    <div class="load-if-visible-placeholder" data-src="images/img_1.jpg" data-alt="Hamburg" data-title="Hamburg"></div>
                </div>
                <div class="justlazy-spinner">
                    <div class="load-if-visible-placeholder" data-src="images/img_2.jpg" data-alt="Heidelberg" data-title="Heidelberg"></div>
                </div>
                <div class="justlazy-spinner">
                    <div class="load-if-visible-placeholder" data-src="images/img_3.jpg" data-alt="Elmshorn" data-title="Elmshorn"></div>
                </div>
            </div>

            <!-- example 2 -->
            <div class="example">
                <h3 id="example-by-placeholder">#2 lazy loading images with pre-loading threshold</h3>
                <p>
                    Usually the image will be loaded when it becomes visible in the viewport.
                    If you set the <code>threshold</code>,
                    the image will be pre-loaded due to the defined pixels.
                    A <code>threshold</code> of 300 means, that the image will be loaded 300 pixels before it becomes
                    visible for the user. This example uses the registration by placeholder function.
                </p>
                <pre><!--
                 --><code><!--
                 -->var placeholders = document.querySelectorAll('.load-with-threshold-placeholder');
<!--             -->for (var i = 0; i < placeholders.length; ++i) {
<!--             -->    Justlazy.registerLazyLoad(placeholders[i], {
<!--             -->        onreplaceCallback: hideIncompleteLoadedImage,
<!--             -->        onloadCallback: showImageAndRemoveSpinner,
<!--             -->        threshold: 300
<!--             -->    });
<!--             -->}<!--
                --></code><!--
             --></pre>
                <div class="justlazy-spinner">
                    <div class="load-with-threshold-placeholder" data-src="images/img_4.jpg" data-alt="San Francisco" data-title="San Francisco"></div>
                </div>
                <div class="justlazy-spinner">
                    <div class="load-with-threshold-placeholder" data-src="images/img_6.jpg" data-alt="Taroko" data-title="Taroko"></div>
                </div>
                <div class="justlazy-spinner">
                    <div class="load-with-threshold-placeholder" data-src="images/img_5.jpg" data-alt="Dresden" data-title="Dresden"></div>
                </div>
            </div>

            <!-- example 3 -->
            <div class="example">
                <h3 id="example-by-custom-event">#3 lazy loading with specific event (e.g. button click)</h3>
                <p>
                    This example uses a button to trigger the image lazy loading manually. Instead
                    of the click event, you can use any other event of your choice and register
                    it via javascript.
                </p>
                <pre><!--
                 --><code><!--
                -->document.getElementById("custom-event-btn").onclick = function() {
<!--             -->    var imgPlaceholder = document.getElementById("custom-event-placeholder");
<!--             -->    Justlazy.lazyLoad(imgPlaceholder, {
<!--             -->        onreplaceCallback: hideIncompleteLoadedImage,
<!--             -->        onloadCallback: showImageAndRemoveSpinner
<!--             -->    });

<!--             -->    return false;
<!--             -->};<!--
                 --></code><!--
             --></pre>
                <a id="custom-event-btn" href="#" class="btn btn-lazy-load" title="lazy load image">lazy load image</a>
                <div class="justlazy-spinner">
                    <div id="custom-event-placeholder" data-src="images/img_7.jpg" data-alt="Chenggong" data-title="Chenggong"></div>
                </div>
            </div>

            <!-- example 4 -->
            <div class="example">
                <h3>#4: lazy loading with srcset attribute</h3>
                <p>
                    This example demonstrates the usage of the <code>srcset</code> attribute. You just have to
                    provide a placeholder with the <code>data-srcset</code> attribute.
                </p>
                <pre><!--
                 --><code><!--
                -->document.getElementById("srcset-btn").onclick = function() {
<!--             -->    var imgPlaceholder = document.getElementById("srcset-placeholder");
<!--             -->    Justlazy.lazyLoad(imgPlaceholder, {
<!--             -->        onreplaceCallback: hideIncompleteLoadedImage,
<!--             -->        onloadCallback: showImageAndRemoveSpinner
<!--             -->    });

<!--             -->    return false;
<!--             -->};<!--
                 --></code><!--
             --></pre>
                <a id="srcset-btn" href="#" class="btn btn-lazy-load" title="lazy load image">lazy load responsive image</a>
                <div class="justlazy-spinner">
                    <div id="srcset-placeholder"
                         data-src="images/img_8_defaultSize.jpg"
                         data-srcset="images/img_8_smallSize.jpg 600w, images/img_8_bigSize.jpg 1000w"
                         data-alt="Dresden"
                         data-title="Dresden">
                    </div>
                </div>
                <p>
                    The comment in the lower right corner of the image indicates the size of the image, which has been
                    loaded. The <code>srcset</code> attribute defines, that the small size is loaded if your screen
                    width is lower or equals
                    than 600 pixels. All screen sizes above will load the big image. If the browser doesn't support
                    the <code>srcset</code>, the default image will be loaded.
                </p>
                <p>
                    If the big image is loaded once, you have to disable or
                    clear the browser cache to see the small image again with a browser horizontal width &lt;= 600px. Otherwise
                    the cached big image will be used in all cases.
                </p>
            </div>
        </section>

        <section>
            <h2>More lazy images ..</h2>
            <div class="justlazy-spinner">
                <div class="lazy-image-placeholder" data-src="images/img_9.jpg" data-alt="London" data-title="London"></div>
            </div>
            <div class="justlazy-spinner">
                <div class="lazy-image-placeholder" data-src="images/img_10.jpg" data-alt="Crete" data-title="Create"></div>
            </div>
            <div class="justlazy-spinner">
                <div class="lazy-image-placeholder" data-src="images/img_11.jpg" data-alt="Dresden" data-title="Dresden"></div>
            </div>
        </section>

    </div>
</div>

<script type="text/javascript" src="javascript/justlazy.js"></script>
<script type="text/javascript" src="javascript/demo.js"></script>

<script>
    // analytics
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-33320475-4', 'auto');
    ga('send', 'pageview');

    // twitter
    !function (d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0], p = /^http:/.test(d.location) ? 'http' : 'https';
        if (!d.getElementById(id)) {
            js = d.createElement(s);
            js.id = id;
            js.src = p + '://platform.twitter.com/widgets.js';
            fjs.parentNode.insertBefore(js, fjs);
        }
    }(document, 'script', 'twitter-wjs');
</script>

</body>
</html>
