!function(a,b){"function"==typeof define&&define.amd?define([],b):"object"==typeof module&&module.exports?module.exports=b():a.Justlazy=b()}(this,function(){"use strict";var a=function(a,c,d){var e=document.createElement("img"),f=d.progressive||!1;e.onload=function(){d.onloadCallback&&d.onloadCallback.call(e),f||b(a,e,d.onreplaceCallback)},e.onerror=function(){d.onerrorCallback&&d.onerrorCallback.call(e),f||b(a,e,d.onreplaceCallback)},c.title&&(e.title=c.title),c.srcset&&e.setAttribute("srcset",c.srcset),e.alt=c.alt,e.src=c.src,f&&b(a,e,d.onreplaceCallback)},b=function(a,b,c){var d=a.parentNode;d&&(d.replaceChild(b,a),c&&c.call(b))},c=function(a){return{src:a.getAttribute("data-src"),alt:a.getAttribute("data-alt"),title:a.getAttribute("data-title"),srcset:a.getAttribute("data-srcset")}},d=function(a){return a||{}},e=function(a,b){var c=window.innerHeight||document.documentElement.clientHeight,d=b||0;return a.getBoundingClientRect().top-c<=d},f=function(a,b){var c=function(d){e(a,b.threshold)&&(g(a,b),window.removeEventListener?window.removeEventListener(d.type,c,!1):window.detachEvent("on"+d.type,c))};return c},g=function(b,e){var f=c(b),g=d(e);f.src&&(f.alt||""===f.alt)&&a(b,f,g)},h=function(a,b){var c=d(b);if(e(a,c.threshold))g(a,b);else{var h=f(a,c);window.addEventListener?window.addEventListener("scroll",h,!1):window.attachEvent("onscroll",h)}},i=function(a,b){for(var c=document.querySelectorAll("."+a),d=0;d<c.length;++d)this.registerLazyLoad(c[d],b)};return{lazyLoad:g,registerLazyLoad:h,registerLazyLoadByClass:i}});